<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>사각형 넓이 구하기 (5문제)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    .problem {
      margin-bottom: 40px;
    }
    .rectangle-container {
      position: relative;
      display: inline-block;
      margin: 10px 0;
    }
    .rectangle {
      background-color: #a2d5f2;
      border: 2px solid #333;
    }
    .label {
      position: absolute;
      font-weight: bold;
      background-color: white;
      padding: 2px 5px;
      border: 1px solid #999;
      font-size: 14px;
    }
    .widthLabel {
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
    }
    .heightLabel {
      left: -55px;
      top: 50%;
      transform: translateY(-50%);
    }
    .result {
      margin-top: 5px;
      font-weight: bold;
    }
    #controls {
      margin-top: 30px;
    }
  </style>
</head>
<body>

  <h2>[문제] 다음 사각형의 넓이를 구하시오.</h2>

  <div id="problems"></div>

  <div id="controls">
    <button onclick="gradeAnswers()">채점하기</button>
    <button onclick="generateProblems()">다시 풀기</button>
    <button onclick="endQuiz()">종료하기</button>
  </div>

  <div id="endMessage" style="margin-top: 20px; font-weight: bold;"></div>

  <script>
    const numProblems = 5;
    const pixelPerCm = 15;
    let problems = [];

    function generateProblems() {
      problems = [];
      const container = document.getElementById("problems");
      container.innerHTML = '';
      document.getElementById("endMessage").innerText = '';

      for (let i = 0; i < numProblems; i++) {
        const width = Math.floor(Math.random() * 11) + 5; // 5~15cm
        const height = Math.floor(Math.random() * 11) + 5;
        problems.push({ width, height });

        const problemDiv = document.createElement("div");
        problemDiv.className = "problem";
        problemDiv.innerHTML = `
          <div>문제 ${i + 1}</div>
          <div class="rectangle-container">
            <div class="label widthLabel">${width}cm</div>
            <div class="label heightLabel">${height}cm</div>
            <div class="rectangle" style="width: ${width * pixelPerCm}px; height: ${height * pixelPerCm}px;"></div>
          </div>
          <div>
            <label>넓이: </label>
            <input type="number" id="answer${i}">
            <span class="result" id="result${i}"></span>
          </div>
        `;
        container.appendChild(problemDiv);
      }
    }

    function gradeAnswers() {
      let score = 0;
      for (let i = 0; i < numProblems; i++) {
        const userInput = parseInt(document.getElementById(`answer${i}`).value);
        const correct = problems[i].width * problems[i].height;
        const resultSpan = document.getElementById(`result${i}`);

        if (userInput === correct) {
          resultSpan.innerText = "✅ 정답";
          resultSpan.style.color = "green";
          score++;
        } else {
          resultSpan.innerText = `❌ 오답 (정답: ${correct})`;
          resultSpan.style.color = "red";
        }
      }
      document.getElementById("endMessage").innerText = `총 ${numProblems}문제 중 ${score}문제를 맞췄습니다!`;
    }

    function endQuiz() {
      document.getElementById("problems").innerHTML = '';
      document.getElementById("endMessage").innerText = "문제를 종료했습니다. 수고하셨습니다!";
    }

    window.onload = generateProblems;
  </script>
</body>
</html>
